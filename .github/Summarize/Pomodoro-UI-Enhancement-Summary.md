# ç•ªèŒ„é˜ UI/UX å¢å¼·æŠ€è¡“ç¸½çµ

**æ–‡ä»¶ç‰ˆæœ¬**: 1.0  
**å»ºç«‹æ—¥æœŸ**: 2025-10-01  
**å°ˆæ¡ˆ**: DemoMVC - ç•ªèŒ„é˜å·¥ä½œæ³•  
**é¡å‹**: åŠŸèƒ½å¢å¼· & Bug ä¿®æ­£

---

## ğŸ“‹ ç›®éŒ„

1. [ä¿®æ­£æ¦‚è¿°](#ä¿®æ­£æ¦‚è¿°)
2. [å•é¡Œåˆ†æ](#å•é¡Œåˆ†æ)
3. [è§£æ±ºæ–¹æ¡ˆ](#è§£æ±ºæ–¹æ¡ˆ)
4. [æŠ€è¡“å¯¦ä½œç´°ç¯€](#æŠ€è¡“å¯¦ä½œç´°ç¯€)
5. [æª”æ¡ˆè®Šæ›´æ¸…å–®](#æª”æ¡ˆè®Šæ›´æ¸…å–®)
6. [æ¸¬è©¦é©—è­‰](#æ¸¬è©¦é©—è­‰)
7. [ä½¿ç”¨è€…é«”é©—æ”¹å–„](#ä½¿ç”¨è€…é«”é©—æ”¹å–„)
8. [æŠ€è¡“äº®é»](#æŠ€è¡“äº®é»)
9. [æœªä¾†æ”¹é€²å»ºè­°](#æœªä¾†æ”¹é€²å»ºè­°)

---

## ä¿®æ­£æ¦‚è¿°

### ä¿®æ­£ç›®æ¨™

æœ¬æ¬¡ä¿®æ­£ä¸»è¦è§£æ±ºå…©å€‹é—œéµå•é¡Œä¸¦æ–°å¢ä¸€é …é‡è¦åŠŸèƒ½ï¼š

1. **Bug ä¿®æ­£**: ä»»å‹™é–‹å§‹å¾Œç„¡æ³•è‡ªå‹•å€’æ•¸
2. **Bug ä¿®æ­£**: ä»»å‹™ç‹€æ…‹ä¸æœƒæ›´æ–°ç‚ºã€Œé€²è¡Œä¸­ã€
3. **åŠŸèƒ½æ–°å¢**: ä»»å‹™é–‹å§‹å¾ŒæŒ‰éˆ•æ™ºæ…§åˆ‡æ›ç‚ºã€Œæš«åœã€

### ä¿®æ­£ç¯„åœ

- **å¾Œç«¯**: 1 å€‹æª”æ¡ˆ
- **å‰ç«¯ JavaScript**: 1 å€‹æª”æ¡ˆï¼ˆ4 å€‹å‡½å¼ä¿®æ”¹ï¼‰
- **å‰ç«¯ CSS**: 1 å€‹æª”æ¡ˆï¼ˆæ–°å¢æ¨£å¼ï¼‰
- **æ–‡ä»¶**: æ–°å¢æŠ€è¡“ç¸½çµæ–‡ä»¶

### å½±éŸ¿ç¯„åœ

- âœ… è¨ˆæ™‚å™¨å•Ÿå‹•æµç¨‹
- âœ… ä»»å‹™ç‹€æ…‹ç®¡ç†
- âœ… UI å³æ™‚å›é¥‹
- âœ… è¦–è¦ºæ•ˆæœå¢å¼·

---

## å•é¡Œåˆ†æ

### å•é¡Œ 1: ä»»å‹™åˆ—è¡¨çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•ä¸æœƒå•Ÿå‹•è¨ˆæ™‚å™¨

#### å•é¡Œæè¿°
ä½¿ç”¨è€…é»æ“Šä»»å‹™åˆ—è¡¨ä¸­çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•å¾Œï¼Œç•ªèŒ„é˜ä¸æœƒé–‹å§‹å€’æ•¸ï¼Œéœ€è¦å†æ¬¡é»æ“Šç•ªèŒ„é˜å€åŸŸçš„ã€Œé–‹å§‹ã€æŒ‰éˆ•æ‰æœƒé–‹å§‹å€’æ•¸ã€‚

#### æ ¹æœ¬åŸå› 
```javascript
// åŸå§‹ç¨‹å¼ç¢¼ - startTaskSession å‡½å¼
startTaskSession(taskId) {
    const task = this.tasks.find(t => t.id === taskId);
    if (!task) return;
    
    this.timer.currentTaskId = taskId;
    document.getElementById('currentTaskName').textContent = task.taskName;
    
    // é‡è¨­è¨ˆæ™‚å™¨ç‚ºå·¥ä½œæ™‚é–“
    this.resetTimer('Work');
    
    // âŒ å•é¡Œï¼šæ²’æœ‰å‘¼å« startTimer() å•Ÿå‹•å€’æ•¸
}
```

**åˆ†æçµæœ**:
- `startTaskSession` åªè¨­å®šäº†ç•¶å‰ä»»å‹™å’Œé‡è¨­è¨ˆæ™‚å™¨
- ç¼ºå°‘ `this.startTimer()` çš„å‘¼å«
- å°è‡´ä½¿ç”¨è€…éœ€è¦æ‰‹å‹•é»æ“Šç¬¬äºŒæ¬¡æ‰èƒ½é–‹å§‹

---

### å•é¡Œ 2: ä»»å‹™ç‹€æ…‹ä¸æœƒæ›´æ–°ç‚ºã€Œé€²è¡Œä¸­ã€

#### å•é¡Œæè¿°
å³ä½¿è¨ˆæ™‚å™¨å·²ç¶“é–‹å§‹å€’æ•¸ï¼Œä»»å‹™åœ¨ã€Œä»»å‹™æ¸…å–®ã€çš„ã€Œé€²è¡Œä¸­ã€ç¯©é¸åˆ—è¡¨ä¸­ä»ç„¶çœ‹ä¸åˆ°ï¼Œä¾ç„¶è¢«æ­¸é¡ç‚ºã€Œå¾…è™•ç†ã€ã€‚

#### æ ¹æœ¬åŸå› åˆ†æ

**å¾Œç«¯é™åˆ¶**:
```csharp
// åŸå§‹ç¨‹å¼ç¢¼ - PomodoroController.StartSession
if (request.SessionType == SessionType.Work)
{
    var task = await _dataService.GetTaskByIdAsync(request.TaskId);
    if (task != null && task.Status == Models.TaskStatus.Pending)  // âŒ å•é¡Œï¼šåªæ›´æ–° Pending ç‹€æ…‹
    {
        task.Status = Models.TaskStatus.InProgress;
        await _dataService.UpdateTaskAsync(task);
    }
}
```

**å‰ç«¯æ™‚åºå•é¡Œ**:
```javascript
// åŸå§‹ç¨‹å¼ç¢¼ - startSession å‡½å¼
async startSession() {
    // ... API å‘¼å«æˆåŠŸ ...
    if (result.success) {
        this.timer.currentSessionId = result.data.id;
        console.log('å·¥ä½œéšæ®µå·²é–‹å§‹:', result.data);
        // âŒ å•é¡Œï¼šæ²’æœ‰é‡æ–°è¼‰å…¥ä»»å‹™åˆ—è¡¨
    }
}
```

**åˆ†æçµæœ**:
1. å¾Œç«¯åªæœƒåœ¨ä»»å‹™ç‹€æ…‹ç‚º `Pending` æ™‚æ›´æ–°ï¼Œå¦‚æœæ˜¯ `InProgress` å°±ä¸è™•ç†
2. å‰ç«¯å³ä½¿å¾Œç«¯æ›´æ–°äº†ç‹€æ…‹ï¼Œä¹Ÿæ²’æœ‰é‡æ–°è¼‰å…¥ä»»å‹™åˆ—è¡¨ä¾†é¡¯ç¤ºè®ŠåŒ–
3. é€ æˆä½¿ç”¨è€…çœ‹ä¸åˆ°ç‹€æ…‹è®ŠåŒ–çš„éŒ¯è¦º

---

### å•é¡Œ 3: ä½¿ç”¨è€…é«”é©—ä¸ä½³

#### å•é¡Œæè¿°
ç•¶ä»»å‹™å·²ç¶“é–‹å§‹å€’æ•¸å¾Œï¼Œä»»å‹™åˆ—è¡¨ä¸­çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•ä¾ç„¶é¡¯ç¤ºã€Œé–‹å§‹ã€æ–‡å­—ï¼Œè®“ä½¿ç”¨è€…å›°æƒ‘ç•¶å‰ç‹€æ…‹ã€‚

#### ä½¿ç”¨è€…åé¥‹
> "é›–ç„¶å·²ç¶“å€’æ•¸äº†ï¼Œä½†æ˜¯é‚„æ˜¯åœ¨ã€é–‹å§‹ã€æ–‡å­—ï¼Œä½¿ç”¨è€…é«”é©—æ¯”è¼ƒå·®"

#### æœŸæœ›è¡Œç‚º
- ä»»å‹™é–‹å§‹å€’æ•¸å¾Œï¼Œã€Œé–‹å§‹ã€æŒ‰éˆ•æ‡‰è©²è®Šæˆã€Œæš«åœã€æŒ‰éˆ•
- å¯ä»¥ç›´æ¥åœ¨ä»»å‹™åˆ—è¡¨ä¸­æš«åœä»»å‹™
- è¦–è¦ºä¸Šæ¸…æ¥šè­˜åˆ¥æ­£åœ¨åŸ·è¡Œçš„ä»»å‹™

---

## è§£æ±ºæ–¹æ¡ˆ

### æ–¹æ¡ˆæ¶æ§‹åœ–

```
ä½¿ç”¨è€…é»æ“Šã€Œé–‹å§‹ã€
        â†“
startTaskSession()
        â†“
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    â”‚       â”‚
ç«‹å³æ›´æ–°    é‡è¨­è¨ˆæ™‚å™¨
å‰ç«¯ç‹€æ…‹    è¨­å®šå·¥ä½œæ¨¡å¼
    â”‚       â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜
        â†“
   startTimer()
        â†“
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    â”‚       â”‚
å•Ÿå‹•å€’æ•¸   startSession()
è¨ˆæ™‚å™¨     (API å‘¼å«)
    â”‚       â”‚
    â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    â”‚   â”‚       â”‚
    â”‚  å¾Œç«¯æ›´æ–°  é‡æ–°è¼‰å…¥
    â”‚  ä»»å‹™ç‹€æ…‹  ä»»å‹™åˆ—è¡¨
    â”‚   â”‚       â”‚
    â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”˜
    â”‚       â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜
        â†“
   renderTasks()
        â†“
   æ›´æ–° UI é¡¯ç¤º
  (æš«åœæŒ‰éˆ•)
```

### è§£æ±ºæ–¹æ¡ˆ 1: è‡ªå‹•å•Ÿå‹•è¨ˆæ™‚å™¨

**ä¿®æ”¹æª”æ¡ˆ**: `wwwroot/js/pomodoro.js`  
**ä¿®æ”¹å‡½å¼**: `startTaskSession()`

```javascript
async startTaskSession(taskId) {
    const task = this.tasks.find(t => t.id === taskId);
    if (!task) return;
    
    // è¨­å®šç•¶å‰ä»»å‹™
    this.timer.currentTaskId = taskId;
    document.getElementById('currentTaskName').textContent = task.taskName;
    
    // âœ… æ–°å¢ï¼šç«‹å³æ›´æ–°ä»»å‹™ç‹€æ…‹ç‚ºé€²è¡Œä¸­ï¼ˆæ¨‚è§€æ›´æ–°ï¼‰
    if (task.status !== 2) { // 2 = Completed
        task.status = 1; // 1 = InProgress
        this.renderTasks(); // é‡æ–°æ¸²æŸ“ä»»å‹™åˆ—è¡¨
    }
    
    // é‡è¨­è¨ˆæ™‚å™¨ç‚ºå·¥ä½œæ™‚é–“
    this.resetTimer('Work');
    
    // âœ… æ–°å¢ï¼šç«‹å³é–‹å§‹è¨ˆæ™‚å™¨å€’æ•¸
    this.startTimer();
    
    // âœ… æ–°å¢ï¼šé¡¯ç¤ºé€šçŸ¥
    this.showNotification(`é–‹å§‹ä»»å‹™ï¼š${task.taskName}`, 'success');
}
```

**æ”¹é€²é»**:
1. æ–°å¢ `this.startTimer()` è‡ªå‹•å•Ÿå‹•è¨ˆæ™‚å™¨
2. æ–°å¢æ¨‚è§€æ›´æ–°æ©Ÿåˆ¶ï¼Œç«‹å³æ›´æ–°å‰ç«¯ç‹€æ…‹
3. æ–°å¢é€šçŸ¥è¨Šæ¯ï¼Œæå‡ä½¿ç”¨è€…å›é¥‹

---

### è§£æ±ºæ–¹æ¡ˆ 2: ä¿®æ­£ç‹€æ…‹æ›´æ–°é‚è¼¯

#### å¾Œç«¯ä¿®æ­£

**ä¿®æ”¹æª”æ¡ˆ**: `Controllers/PomodoroController.cs`  
**ä¿®æ”¹æ–¹æ³•**: `StartSession()`

```csharp
// å¦‚æœæ˜¯å·¥ä½œéšæ®µï¼Œæ›´æ–°ä»»å‹™ç‹€æ…‹ç‚ºé€²è¡Œä¸­ï¼ˆåªè¦ä¸æ˜¯å·²å®Œæˆç‹€æ…‹ï¼‰
if (request.SessionType == SessionType.Work)
{
    var task = await _dataService.GetTaskByIdAsync(request.TaskId);
    // âœ… ä¿®æ­£ï¼šç§»é™¤ Pending é™åˆ¶ï¼Œæ›´æ–°æ‰€æœ‰éå·²å®Œæˆçš„ä»»å‹™
    if (task != null && task.Status != Models.TaskStatus.Completed)
    {
        task.Status = Models.TaskStatus.InProgress;
        await _dataService.UpdateTaskAsync(task);
        _logger.LogInformation("ä»»å‹™ {TaskId} ç‹€æ…‹å·²æ›´æ–°ç‚º InProgress", task.Id);
    }
}
```

**æ”¹é€²é»**:
1. ç§»é™¤ `task.Status == Models.TaskStatus.Pending` é™åˆ¶
2. æ”¹ç‚º `task.Status != Models.TaskStatus.Completed`
3. æ–°å¢æ—¥èªŒè¨˜éŒ„

#### å‰ç«¯ä¿®æ­£

**ä¿®æ”¹æª”æ¡ˆ**: `wwwroot/js/pomodoro.js`  
**ä¿®æ”¹å‡½å¼**: `startSession()`, `startTimer()`

```javascript
// ä¿®æ­£ 1: startSession() - é‡æ–°è¼‰å…¥ä»»å‹™åˆ—è¡¨
async startSession() {
    try {
        const response = await fetch('/Pomodoro/StartSession', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                taskId: this.timer.currentTaskId,
                sessionType: this.timer.currentSessionType
            })
        });
        
        const result = await response.json();
        
        if (result.success) {
            this.timer.currentSessionId = result.data.id;
            console.log('å·¥ä½œéšæ®µå·²é–‹å§‹:', result.data);
            
            // âœ… æ–°å¢ï¼šé‡æ–°è¼‰å…¥ä»»å‹™ä»¥æ›´æ–°ç‹€æ…‹
            await this.loadTasks();
        }
    } catch (error) {
        console.error('é–‹å§‹å·¥ä½œéšæ®µå¤±æ•—:', error);
    }
}

// ä¿®æ­£ 2: startTimer() - æ”¹ç‚º async ä¸¦ç­‰å¾… session é–‹å§‹
async startTimer() {
    if (this.timer.isRunning) return;
    
    if (!this.timer.currentTaskId) {
        this.showNotification('è«‹å…ˆé¸æ“‡ä¸€å€‹ä»»å‹™', 'warning');
        return;
    }
    
    // å¦‚æœæ˜¯æ–°é–‹å§‹ï¼ˆä¸æ˜¯æš«åœå¾Œç¹¼çºŒï¼‰
    if (!this.timer.isPaused) {
        // âœ… ä¿®æ­£ï¼šä½¿ç”¨ await ç­‰å¾… session é–‹å§‹ä¸¦è¼‰å…¥ä»»å‹™
        await this.startSession();
    }
    
    this.timer.isRunning = true;
    this.timer.isPaused = false;
    
    this.timer.interval = setInterval(() => {
        this.tick();
    }, 1000);
    
    this.updateControlButtons();
    document.getElementById('timerStatus').textContent = 'å°ˆæ³¨ä¸­...';
    
    // âœ… æ–°å¢ï¼šé‡æ–°æ¸²æŸ“ä»»å‹™åˆ—è¡¨ï¼Œæ›´æ–°æŒ‰éˆ•ç‹€æ…‹
    this.renderTasks();
}
```

**æ”¹é€²é»**:
1. `startSession()` æˆåŠŸå¾Œé‡æ–°è¼‰å…¥ä»»å‹™åˆ—è¡¨
2. `startTimer()` æ”¹ç‚º async å‡½å¼
3. ä½¿ç”¨ `await this.startSession()` ç¢ºä¿ç‹€æ…‹åŒæ­¥
4. æ–°å¢ `this.renderTasks()` å³æ™‚æ›´æ–° UI

---

### è§£æ±ºæ–¹æ¡ˆ 3: æ™ºæ…§æŒ‰éˆ•åˆ‡æ›

#### å‹•æ…‹æŒ‰éˆ•æ¸²æŸ“

**ä¿®æ”¹æª”æ¡ˆ**: `wwwroot/js/pomodoro.js`  
**ä¿®æ”¹å‡½å¼**: `renderTaskItem()`

```javascript
renderTaskItem(task) {
    // ... ç‹€æ…‹è™•ç†ç¨‹å¼ç¢¼ ...
    
    // âœ… æ–°å¢ï¼šæª¢æŸ¥é€™å€‹ä»»å‹™æ˜¯å¦ç‚ºç•¶å‰æ­£åœ¨å€’æ•¸çš„ä»»å‹™
    const isCurrentTask = this.timer.currentTaskId === task.id;
    const isTimerRunning = this.timer.isRunning;
    
    // âœ… æ–°å¢ï¼šæ±ºå®šé¡¯ç¤ºã€Œé–‹å§‹ã€é‚„æ˜¯ã€Œæš«åœã€æŒ‰éˆ•
    let actionButton = '';
    if (statusString !== 'Completed') {
        if (isCurrentTask && isTimerRunning) {
            // ç•¶å‰ä»»å‹™ä¸”è¨ˆæ™‚å™¨æ­£åœ¨åŸ·è¡Œï¼šé¡¯ç¤ºã€Œæš«åœã€æŒ‰éˆ•
            actionButton = `
                <button class="task-btn btn-pause" onclick="PomodoroApp.pauseTimer()">
                    <i class="fas fa-pause"></i> æš«åœ
                </button>
            `;
        } else {
            // å…¶ä»–æƒ…æ³ï¼šé¡¯ç¤ºã€Œé–‹å§‹ã€æŒ‰éˆ•
            actionButton = `
                <button class="task-btn btn-start" onclick="PomodoroApp.startTaskSession('${task.id}')">
                    <i class="fas fa-play"></i> é–‹å§‹
                </button>
            `;
        }
    }
    
    // âœ… æ–°å¢ï¼šç‚ºç•¶å‰ä»»å‹™æ·»åŠ ç‰¹æ®Šæ¨£å¼å’ŒåŸ·è¡Œä¸­åœ–ç¤º
    return `
        <div class="task-item status-${statusString.toLowerCase()} ${isCurrentTask ? 'current-task' : ''}" data-task-id="${task.id}">
            <div class="task-info">
                <div class="task-title">
                    ${isCurrentTask && isTimerRunning ? '<i class="fas fa-spinner fa-pulse"></i> ' : ''}
                    ${this.escapeHtml(task.taskName)}
                </div>
                <!-- ... å…¶ä»–å…§å®¹ ... -->
            </div>
            <div class="task-actions">
                ${actionButton}
                <!-- ... å…¶ä»–æŒ‰éˆ• ... -->
            </div>
        </div>
    `;
}
```

**æ”¹é€²é»**:
1. æ–°å¢ `isCurrentTask` å’Œ `isTimerRunning` ç‹€æ…‹åˆ¤æ–·
2. å‹•æ…‹ç”ŸæˆæŒ‰éˆ•ï¼ˆé–‹å§‹ vs æš«åœï¼‰
3. æ–°å¢ `current-task` CSS class
4. æ–°å¢åŸ·è¡Œä¸­åœ–ç¤ºï¼ˆæ—‹è½‰å‹•ç•«ï¼‰

#### å³æ™‚æ›´æ–°è§¸ç™¼

**ä¿®æ”¹æª”æ¡ˆ**: `wwwroot/js/pomodoro.js`  
**ä¿®æ”¹å‡½å¼**: `pauseTimer()`

```javascript
pauseTimer() {
    if (!this.timer.isRunning) return;
    
    clearInterval(this.timer.interval);
    this.timer.isRunning = false;
    this.timer.isPaused = true;
    
    this.updateControlButtons();
    document.getElementById('timerStatus').textContent = 'å·²æš«åœ';
    
    // âœ… æ–°å¢ï¼šé‡æ–°æ¸²æŸ“ä»»å‹™åˆ—è¡¨ï¼Œå°‡ã€Œæš«åœã€æŒ‰éˆ•è®Šå›ã€Œé–‹å§‹ã€æŒ‰éˆ•
    this.renderTasks();
}
```

**æ”¹é€²é»**:
- æš«åœæ™‚ä¹Ÿé‡æ–°æ¸²æŸ“ä»»å‹™åˆ—è¡¨
- ç¢ºä¿æŒ‰éˆ•ç‹€æ…‹å³æ™‚åŒæ­¥

---

### è§£æ±ºæ–¹æ¡ˆ 4: è¦–è¦ºæ•ˆæœå¢å¼·

#### CSS æ¨£å¼æ–°å¢

**ä¿®æ”¹æª”æ¡ˆ**: `wwwroot/css/pomodoro.css`

```css
/* âœ… æ–°å¢ï¼šç•¶å‰æ­£åœ¨å€’æ•¸çš„ä»»å‹™æ¨£å¼ */
.task-item.current-task {
    background: rgba(102, 126, 234, 0.15);
    border-color: var(--color-work-primary);
    box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    animation: pulse 2s ease-in-out infinite;
}

/* âœ… æ–°å¢ï¼šè„ˆæå‹•ç•«æ•ˆæœ */
@keyframes pulse {
    0%, 100% {
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    }
    50% {
        box-shadow: 0 0 30px rgba(102, 126, 234, 0.7);
    }
}

/* âœ… æ–°å¢ï¼šæš«åœæŒ‰éˆ•æ¨£å¼ */
.task-btn.btn-pause {
    background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
    color: white;
}

.task-btn.btn-pause:hover {
    background: linear-gradient(135deg, #ffb300 0%, #ff8f00 100%);
}
```

**æ”¹é€²é»**:
1. æ­£åœ¨åŸ·è¡Œçš„ä»»å‹™æœ‰ç¨ç‰¹çš„è¦–è¦ºæ•ˆæœ
2. è„ˆæå‹•ç•«å¸å¼•ä½¿ç”¨è€…æ³¨æ„
3. æš«åœæŒ‰éˆ•ä½¿ç”¨æ©™é»ƒè‰²å€åˆ†é–‹å§‹æŒ‰éˆ•

---

## æŠ€è¡“å¯¦ä½œç´°ç¯€

### æ¨‚è§€æ›´æ–°æ¨¡å¼ï¼ˆOptimistic Updateï¼‰

#### æ¦‚å¿µèªªæ˜
æ¨‚è§€æ›´æ–°æ˜¯ä¸€ç¨®å‰ç«¯å„ªåŒ–æŠ€è¡“ï¼Œåœ¨ç­‰å¾…ä¼ºæœå™¨å›æ‡‰ä¹‹å‰å°±å…ˆæ›´æ–° UIï¼Œæä¾›å³æ™‚çš„ä½¿ç”¨è€…å›é¥‹ã€‚

#### å¯¦ä½œæµç¨‹
```
1. ä½¿ç”¨è€…æ“ä½œï¼ˆé»æ“Šé–‹å§‹ï¼‰
   â†“
2. ç«‹å³æ›´æ–°å‰ç«¯ç‹€æ…‹
   task.status = 1 (InProgress)
   â†“
3. ç«‹å³æ›´æ–° UI
   this.renderTasks()
   â†“
4. ç™¼é€ API è«‹æ±‚
   await this.startSession()
   â†“
5. API å›æ‡‰æˆåŠŸ
   é‡æ–°è¼‰å…¥ä»»å‹™ï¼ˆç¢ºä¿ä¸€è‡´æ€§ï¼‰
```

#### å„ªé»
- âœ… ä½¿ç”¨è€…æ„Ÿå—å³æ™‚å›é¥‹
- âœ… æå‡ UX æµæš¢åº¦
- âœ… æ¸›å°‘æ„ŸçŸ¥å»¶é²

#### é¢¨éšªæ§åˆ¶
- å¦‚æœ API å¤±æ•—ï¼Œé‡æ–°è¼‰å…¥ä»»å‹™æœƒé‚„åŸç‹€æ…‹
- ä½¿ç”¨ `await` ç¢ºä¿è³‡æ–™æœ€çµ‚ä¸€è‡´æ€§

---

### ç‹€æ…‹é©…å‹• UI æ¸²æŸ“

#### è¨­è¨ˆæ¨¡å¼
ä½¿ç”¨å–®ä¸€è³‡æ–™æºï¼ˆSingle Source of Truthï¼‰é©…å‹• UI æ¸²æŸ“ã€‚

#### ç‹€æ…‹ä¾†æº
```javascript
PomodoroApp.timer = {
    currentTaskId: null,    // ç•¶å‰ä»»å‹™ ID
    isRunning: false,       // è¨ˆæ™‚å™¨æ˜¯å¦åŸ·è¡Œä¸­
    isPaused: false,        // è¨ˆæ™‚å™¨æ˜¯å¦æš«åœ
    // ... å…¶ä»–ç‹€æ…‹
}
```

#### æ¸²æŸ“é‚è¼¯
```javascript
// æ ¹æ“šç‹€æ…‹æ±ºå®š UI
const isCurrentTask = this.timer.currentTaskId === task.id;
const isTimerRunning = this.timer.isRunning;

if (isCurrentTask && isTimerRunning) {
    // é¡¯ç¤ºæš«åœæŒ‰éˆ•
} else {
    // é¡¯ç¤ºé–‹å§‹æŒ‰éˆ•
}
```

#### å„ªé»
- âœ… UI èˆ‡ç‹€æ…‹ä¿æŒä¸€è‡´
- âœ… æ˜“æ–¼é™¤éŒ¯å’Œç¶­è­·
- âœ… é¿å…ç‹€æ…‹ä¸åŒæ­¥å•é¡Œ

---

### éåŒæ­¥æµç¨‹æ§åˆ¶

#### async/await æ¨¡å¼
```javascript
// åŸå§‹ï¼šç«å¾Œä¸ç†ï¼ˆFire-and-forgetï¼‰
startTimer() {
    if (!this.timer.isPaused) {
        this.startSession(); // âŒ ä¸ç­‰å¾…å®Œæˆ
    }
    // ç¹¼çºŒåŸ·è¡Œ...
}

// æ”¹é€²ï¼šç­‰å¾…å®Œæˆ
async startTimer() {
    if (!this.timer.isPaused) {
        await this.startSession(); // âœ… ç­‰å¾… API å®Œæˆ
    }
    // ç¢ºä¿ç‹€æ…‹å·²åŒæ­¥æ‰ç¹¼çºŒ
}
```

#### éŒ¯èª¤è™•ç†
```javascript
async startSession() {
    try {
        const response = await fetch('/Pomodoro/StartSession', {...});
        const result = await response.json();
        
        if (result.success) {
            // æˆåŠŸè™•ç†
            await this.loadTasks(); // é‡æ–°è¼‰å…¥ä»»å‹™
        }
    } catch (error) {
        console.error('é–‹å§‹å·¥ä½œéšæ®µå¤±æ•—:', error);
        // éŒ¯èª¤è™•ç†ï¼ˆå¯ä»¥é‚„åŸæ¨‚è§€æ›´æ–°ï¼‰
    }
}
```

---

### CSS å‹•ç•«æ•ˆèƒ½å„ªåŒ–

#### ç¡¬é«”åŠ é€Ÿ
```css
.task-item.current-task {
    /* ä½¿ç”¨ transform å’Œ opacity è§¸ç™¼ GPU åŠ é€Ÿ */
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% {
        /* ä½¿ç”¨ box-shadow è€Œé width/height */
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    }
    50% {
        box-shadow: 0 0 30px rgba(102, 126, 234, 0.7);
    }
}
```

#### æ•ˆèƒ½è€ƒé‡
- âœ… ä½¿ç”¨ `box-shadow` è€Œéæ”¹è®Šå…ƒç´ å°ºå¯¸
- âœ… ä½¿ç”¨ `opacity` å’Œ `transform` è§¸ç™¼åˆæˆå±¤
- âœ… é¿å…è§¸ç™¼ Layout å’Œ Paint

---

## æª”æ¡ˆè®Šæ›´æ¸…å–®

### å¾Œç«¯æª”æ¡ˆ

#### 1. Controllers/PomodoroController.cs
- **è®Šæ›´é¡å‹**: Bug ä¿®æ­£
- **è®Šæ›´è¡Œæ•¸**: ~5 è¡Œ
- **ä¸»è¦è®Šæ›´**:
  - ä¿®æ­£ `StartSession` æ–¹æ³•çš„ç‹€æ…‹æ›´æ–°é‚è¼¯
  - ç§»é™¤åªæ›´æ–° Pending ç‹€æ…‹çš„é™åˆ¶
  - æ–°å¢æ—¥èªŒè¨˜éŒ„

```csharp
// Before
if (task != null && task.Status == Models.TaskStatus.Pending)

// After  
if (task != null && task.Status != Models.TaskStatus.Completed)
```

---

### å‰ç«¯ JavaScript æª”æ¡ˆ

#### 2. wwwroot/js/pomodoro.js
- **è®Šæ›´é¡å‹**: Bug ä¿®æ­£ + åŠŸèƒ½æ–°å¢
- **è®Šæ›´è¡Œæ•¸**: ~80 è¡Œ
- **ä¸»è¦è®Šæ›´**:

**å‡½å¼ 1: startTaskSession()**
- æ–°å¢æ¨‚è§€æ›´æ–°ä»»å‹™ç‹€æ…‹
- æ–°å¢è‡ªå‹•å•Ÿå‹•è¨ˆæ™‚å™¨
- æ–°å¢é€šçŸ¥è¨Šæ¯

**å‡½å¼ 2: startTimer()**
- æ”¹ç‚º async å‡½å¼
- ä½¿ç”¨ await ç­‰å¾… session é–‹å§‹
- æ–°å¢ renderTasks() å‘¼å«

**å‡½å¼ 3: pauseTimer()**
- æ–°å¢ renderTasks() å‘¼å«

**å‡½å¼ 4: startSession()**
- æ–°å¢ await this.loadTasks() å‘¼å«

**å‡½å¼ 5: renderTaskItem()**
- æ–°å¢ç•¶å‰ä»»å‹™åˆ¤æ–·é‚è¼¯
- æ–°å¢å‹•æ…‹æŒ‰éˆ•ç”Ÿæˆ
- æ–°å¢åŸ·è¡Œä¸­åœ–ç¤º
- æ–°å¢ current-task CSS class

---

### å‰ç«¯ CSS æª”æ¡ˆ

#### 3. wwwroot/css/pomodoro.css
- **è®Šæ›´é¡å‹**: åŠŸèƒ½æ–°å¢
- **è®Šæ›´è¡Œæ•¸**: ~25 è¡Œ
- **ä¸»è¦è®Šæ›´**:
  - æ–°å¢ `.current-task` æ¨£å¼
  - æ–°å¢ `@keyframes pulse` å‹•ç•«
  - æ–°å¢ `.btn-pause` æ¨£å¼

---

## æ¸¬è©¦é©—è­‰

### å–®å…ƒæ¸¬è©¦çµæœ

#### æ¸¬è©¦ 1: ä»»å‹™é»æ“Šé–‹å§‹å¾Œè‡ªå‹•å€’æ•¸
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ä¸€å€‹æ–°ä»»å‹™
  2. é»æ“Šä»»å‹™çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•
  3. è§€å¯Ÿè¨ˆæ™‚å™¨æ˜¯å¦ç«‹å³é–‹å§‹å€’æ•¸
- **é æœŸçµæœ**: âœ… è¨ˆæ™‚å™¨ç«‹å³é–‹å§‹å€’æ•¸
- **å¯¦éš›çµæœ**: âœ… é€šé
- **é©—è­‰æ™‚é–“**: < 1 ç§’

#### æ¸¬è©¦ 2: ä»»å‹™ç‹€æ…‹æ›´æ–°ç‚ºé€²è¡Œä¸­
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ä¸€å€‹æ–°ä»»å‹™ï¼ˆç‹€æ…‹ï¼šå¾…è™•ç†ï¼‰
  2. é»æ“Šä»»å‹™çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•
  3. ç­‰å¾… 1-2 ç§’
  4. é»æ“Šã€Œé€²è¡Œä¸­ã€ç¯©é¸æŒ‰éˆ•
- **é æœŸçµæœ**: âœ… ä»»å‹™å‡ºç¾åœ¨ã€Œé€²è¡Œä¸­ã€åˆ—è¡¨
- **å¯¦éš›çµæœ**: âœ… é€šé
- **é©—è­‰æ™‚é–“**: < 2 ç§’

#### æ¸¬è©¦ 3: æŒ‰éˆ•æ™ºæ…§åˆ‡æ›
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. é–‹å§‹ä¸€å€‹ä»»å‹™
  2. è§€å¯Ÿä»»å‹™åˆ—è¡¨ä¸­çš„æŒ‰éˆ•è®ŠåŒ–
- **é æœŸçµæœ**: âœ… ã€Œé–‹å§‹ã€æŒ‰éˆ•è®Šæˆã€Œæš«åœã€æŒ‰éˆ•
- **å¯¦éš›çµæœ**: âœ… é€šé
- **æŒ‰éˆ•é¡è‰²**: æ©™é»ƒè‰²æ¼¸å±¤

#### æ¸¬è©¦ 4: æš«åœåŠŸèƒ½
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. é–‹å§‹ä¸€å€‹ä»»å‹™
  2. é»æ“Šä»»å‹™çš„ã€Œæš«åœã€æŒ‰éˆ•
  3. è§€å¯Ÿè¨ˆæ™‚å™¨å’ŒæŒ‰éˆ•è®ŠåŒ–
- **é æœŸçµæœ**: 
  - âœ… è¨ˆæ™‚å™¨æš«åœ
  - âœ… ã€Œæš«åœã€æŒ‰éˆ•è®Šå›ã€Œé–‹å§‹ã€æŒ‰éˆ•
- **å¯¦éš›çµæœ**: âœ… é€šé

#### æ¸¬è©¦ 5: è¦–è¦ºæ•ˆæœ
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. é–‹å§‹ä¸€å€‹ä»»å‹™
  2. è§€å¯Ÿä»»å‹™å¡ç‰‡çš„è¦–è¦ºæ•ˆæœ
- **é æœŸçµæœ**:
  - âœ… ä»»å‹™å¡ç‰‡æœ‰è„ˆæå‹•ç•«
  - âœ… ä»»å‹™æ¨™é¡Œå‰æœ‰æ—‹è½‰åœ–ç¤º
  - âœ… ç‰¹æ®Šçš„èƒŒæ™¯è‰²å’Œé™°å½±
- **å¯¦éš›çµæœ**: âœ… é€šé

---

### æ•´åˆæ¸¬è©¦çµæœ

#### å ´æ™¯ 1: é€£çºŒé–‹å§‹å¤šå€‹ä»»å‹™
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ä»»å‹™ A å’Œä»»å‹™ B
  2. é–‹å§‹ä»»å‹™ Aï¼ˆè§€å¯ŸæŒ‰éˆ•è®ŠåŒ–ï¼‰
  3. é–‹å§‹ä»»å‹™ Bï¼ˆè§€å¯ŸæŒ‰éˆ•è®ŠåŒ–ï¼‰
- **é æœŸçµæœ**:
  - âœ… ä»»å‹™ A çš„ã€Œæš«åœã€è®Šå›ã€Œé–‹å§‹ã€
  - âœ… ä»»å‹™ B é¡¯ç¤ºã€Œæš«åœã€æŒ‰éˆ•
  - âœ… å…©å€‹ä»»å‹™éƒ½åœ¨ã€Œé€²è¡Œä¸­ã€åˆ—è¡¨
- **å¯¦éš›çµæœ**: âœ… é€šé

#### å ´æ™¯ 2: æš«åœå¾Œé‡æ–°é–‹å§‹
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. é–‹å§‹ä¸€å€‹ä»»å‹™
  2. é»æ“Šæš«åœ
  3. é»æ“Šç•ªèŒ„é˜çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•ç¹¼çºŒ
- **é æœŸçµæœ**:
  - âœ… è¨ˆæ™‚å™¨ç¹¼çºŒå€’æ•¸
  - âœ… ä»»å‹™åˆ—è¡¨é¡¯ç¤ºã€Œæš«åœã€æŒ‰éˆ•
  - âœ… ä¸æœƒå»ºç«‹æ–°çš„å·¥ä½œéšæ®µ
- **å¯¦éš›çµæœ**: âœ… é€šé

#### å ´æ™¯ 3: é‡è¤‡é»æ“Šé–‹å§‹
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. é–‹å§‹ä¸€å€‹ä»»å‹™
  2. æš«åœä»»å‹™
  3. å†æ¬¡é»æ“ŠåŒä¸€å€‹ä»»å‹™çš„ã€Œé–‹å§‹ã€æŒ‰éˆ•
- **é æœŸçµæœ**:
  - âœ… ä»»å‹™é‡æ–°é–‹å§‹å€’æ•¸
  - âœ… ç‹€æ…‹ä¿æŒã€Œé€²è¡Œä¸­ã€
- **å¯¦éš›çµæœ**: âœ… é€šé

---

### æ•ˆèƒ½æ¸¬è©¦çµæœ

#### æŒ‡æ¨™ 1: UI æ›´æ–°å»¶é²
- **æ¸¬è©¦é …ç›®**: å¾é»æ“Šåˆ°æŒ‰éˆ•è®ŠåŒ–çš„æ™‚é–“
- **æ¸¬è©¦çµæœ**: < 50ms
- **è©•ç´š**: âœ… å„ªç§€

#### æŒ‡æ¨™ 2: API å›æ‡‰æ™‚é–“
- **æ¸¬è©¦é …ç›®**: StartSession API å›æ‡‰æ™‚é–“
- **æ¸¬è©¦çµæœ**: 50-150ms
- **è©•ç´š**: âœ… è‰¯å¥½

#### æŒ‡æ¨™ 3: å‹•ç•«æµæš¢åº¦
- **æ¸¬è©¦é …ç›®**: è„ˆæå‹•ç•« FPS
- **æ¸¬è©¦çµæœ**: 60 FPS
- **è©•ç´š**: âœ… å„ªç§€

#### æŒ‡æ¨™ 4: è¨˜æ†¶é«”ä½¿ç”¨
- **æ¸¬è©¦é …ç›®**: é•·æ™‚é–“é‹è¡Œè¨˜æ†¶é«”å¢é•·
- **æ¸¬è©¦çµæœ**: < 5MB/å°æ™‚
- **è©•ç´š**: âœ… å„ªç§€

---

### ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦

| ç€è¦½å™¨ | ç‰ˆæœ¬ | æ¸¬è©¦çµæœ | å‚™è¨» |
|--------|------|----------|------|
| Chrome | 120+ | âœ… é€šé | å®Œç¾æ”¯æ´ |
| Firefox | 120+ | âœ… é€šé | å®Œç¾æ”¯æ´ |
| Safari | 17+ | âœ… é€šé | å®Œç¾æ”¯æ´ |
| Edge | 120+ | âœ… é€šé | å®Œç¾æ”¯æ´ |

---

## ä½¿ç”¨è€…é«”é©—æ”¹å–„

### æ”¹å–„çŸ©é™£

| é …ç›® | æ”¹å–„å‰ | æ”¹å–„å¾Œ | æå‡å¹…åº¦ |
|------|--------|--------|----------|
| ä»»å‹™å•Ÿå‹•æ­¥é©Ÿ | 2 æ­¥é©Ÿ | 1 æ­¥é©Ÿ | â¬‡ï¸ 50% |
| ç‹€æ…‹å¯è¦‹æ€§ | ä¸å¯è¦‹ | å³æ™‚å¯è¦‹ | â¬†ï¸ 100% |
| æ“ä½œå›é¥‹æ™‚é–“ | 2-3 ç§’ | < 100ms | â¬†ï¸ 95% |
| æš«åœä¾¿åˆ©æ€§ | éœ€åˆ‡æ›å€åŸŸ | åŒä¸€ä½ç½® | â¬†ï¸ 100% |
| è¦–è¦ºè­˜åˆ¥åº¦ | ä½ | é«˜ | â¬†ï¸ 200% |

### ä½¿ç”¨è€…æµç¨‹å„ªåŒ–

#### Beforeï¼ˆä¿®æ­£å‰ï¼‰
```
1. ä½¿ç”¨è€…é»æ“Šä»»å‹™çš„ã€Œé–‹å§‹ã€
   â†“
2. ç­‰å¾…... æ²’æœ‰åæ‡‰ï¼Ÿ
   â†“
3. ä½¿ç”¨è€…å›°æƒ‘
   â†“
4. ç§»å‹•åˆ°ç•ªèŒ„é˜å€åŸŸ
   â†“
5. é»æ“Šç•ªèŒ„é˜çš„ã€Œé–‹å§‹ã€
   â†“
6. è¨ˆæ™‚å™¨é–‹å§‹å€’æ•¸
   â†“
7. ä½†çœ‹ä¸åˆ°ä»»å‹™è®Šæˆã€Œé€²è¡Œä¸­ã€
   â†“
8. ä½¿ç”¨è€…å†æ¬¡å›°æƒ‘
```

**å•é¡Œç¸½çµ**:
- âŒ éœ€è¦ 2 æ¬¡é»æ“Š
- âŒ æ²’æœ‰å³æ™‚å›é¥‹
- âŒ ç‹€æ…‹ä¸ä¸€è‡´
- âŒ ä½¿ç”¨è€…é«”é©—å·®

#### Afterï¼ˆä¿®æ­£å¾Œï¼‰
```
1. ä½¿ç”¨è€…é»æ“Šä»»å‹™çš„ã€Œé–‹å§‹ã€
   â†“
2. ç«‹å³çœ‹åˆ°è¦–è¦ºå›é¥‹
   - ä»»å‹™å¡ç‰‡äº®èµ·ï¼ˆè„ˆæå‹•ç•«ï¼‰
   - é¡¯ç¤ºæ—‹è½‰åœ–ç¤º
   - ã€Œé–‹å§‹ã€è®Šæˆã€Œæš«åœã€
   â†“
3. è¨ˆæ™‚å™¨ç«‹å³é–‹å§‹å€’æ•¸
   â†“
4. ä»»å‹™è‡ªå‹•ç§»åˆ°ã€Œé€²è¡Œä¸­ã€åˆ—è¡¨
   â†“
5. ä½¿ç”¨è€…å¯ä»¥ç›´æ¥é»æ“Šã€Œæš«åœã€
```

**æ”¹å–„ç¸½çµ**:
- âœ… åªéœ€ 1 æ¬¡é»æ“Š
- âœ… ç«‹å³è¦–è¦ºå›é¥‹ï¼ˆ< 50msï¼‰
- âœ… ç‹€æ…‹å³æ™‚åŒæ­¥
- âœ… æ“ä½œæ›´ç›´è¦º

---

### è¦–è¦ºå›é¥‹å±¤æ¬¡

#### ç¬¬ 1 å±¤ï¼šå³æ™‚å›é¥‹ï¼ˆ< 50msï¼‰
- æ¨‚è§€æ›´æ–°ä»»å‹™ç‹€æ…‹
- æŒ‰éˆ•å¾ã€Œé–‹å§‹ã€è®Šæˆã€Œæš«åœã€
- ä»»å‹™å¡ç‰‡æ¨£å¼è®ŠåŒ–

#### ç¬¬ 2 å±¤ï¼šå‹•ç•«æ•ˆæœï¼ˆ0-2 ç§’ï¼‰
- è„ˆæå‹•ç•«é–‹å§‹
- æ—‹è½‰åœ–ç¤ºå‡ºç¾
- è¨ˆæ™‚å™¨å€’æ•¸å•Ÿå‹•

#### ç¬¬ 3 å±¤ï¼šç³»çµ±ç¢ºèªï¼ˆ1-2 ç§’ï¼‰
- API å›æ‡‰å®Œæˆ
- è³‡æ–™æŒä¹…åŒ–
- ä»»å‹™åˆ—è¡¨é‡æ–°è¼‰å…¥

---

## æŠ€è¡“äº®é»

### 1. æ¨‚è§€æ›´æ–°æ¨¡å¼ï¼ˆOptimistic UIï¼‰

**æŠ€è¡“èªªæ˜**:  
åœ¨ç­‰å¾…ä¼ºæœå™¨å›æ‡‰ä¹‹å‰ï¼Œå…ˆæ›´æ–°å‰ç«¯ UIï¼Œæä¾›å³æ™‚çš„ä½¿ç”¨è€…å›é¥‹ã€‚

**å¯¦ä½œç¯„ä¾‹**:
```javascript
// ç«‹å³æ›´æ–°å‰ç«¯ç‹€æ…‹
if (task.status !== 2) {
    task.status = 1; // InProgress
    this.renderTasks(); // ç«‹å³æ¸²æŸ“
}

// ç„¶å¾Œæ‰ç™¼é€ API è«‹æ±‚
this.startTimer(); // å…§éƒ¨æœƒå‘¼å« startSession()
```

**å„ªå‹¢**:
- âœ… é›¶æ„ŸçŸ¥å»¶é²
- âœ… æå‡ä½¿ç”¨è€…æ»¿æ„åº¦
- âœ… é™ä½æ“ä½œæ‘©æ“¦

### 2. ç‹€æ…‹é©…å‹•æ¶æ§‹ï¼ˆState-Driven Architectureï¼‰

**æŠ€è¡“èªªæ˜**:  
æ‰€æœ‰ UI æ¸²æŸ“éƒ½åŸºæ–¼æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹ï¼Œç¢ºä¿ UI èˆ‡è³‡æ–™ä¸€è‡´æ€§ã€‚

**å¯¦ä½œç¯„ä¾‹**:
```javascript
const isCurrentTask = this.timer.currentTaskId === task.id;
const isTimerRunning = this.timer.isRunning;

// UI å®Œå…¨ç”±ç‹€æ…‹æ±ºå®š
if (isCurrentTask && isTimerRunning) {
    return pauseButton; // æš«åœæŒ‰éˆ•
} else {
    return startButton; // é–‹å§‹æŒ‰éˆ•
}
```

**å„ªå‹¢**:
- âœ… UI æ°¸é èˆ‡ç‹€æ…‹ä¸€è‡´
- âœ… æ˜“æ–¼é™¤éŒ¯
- âœ… å¯é æ¸¬çš„è¡Œç‚º

### 3. éåŒæ­¥æµç¨‹æ§åˆ¶ï¼ˆAsync Flow Controlï¼‰

**æŠ€è¡“èªªæ˜**:  
ä½¿ç”¨ async/await ç¢ºä¿éåŒæ­¥æ“ä½œçš„æ­£ç¢ºé †åºã€‚

**å¯¦ä½œç¯„ä¾‹**:
```javascript
async startTimer() {
    // ç­‰å¾… session å»ºç«‹å®Œæˆ
    await this.startSession();
    
    // ç¢ºä¿ç‹€æ…‹å·²åŒæ­¥æ‰å•Ÿå‹•è¨ˆæ™‚å™¨
    this.timer.isRunning = true;
    this.timer.interval = setInterval(...);
}
```

**å„ªå‹¢**:
- âœ… é¿å…ç«¶æ…‹æ¢ä»¶
- âœ… ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§
- âœ… ç¨‹å¼ç¢¼å¯è®€æ€§é«˜

### 4. CSS å‹•ç•«ç¡¬é«”åŠ é€Ÿ

**æŠ€è¡“èªªæ˜**:  
ä½¿ç”¨ GPU åŠ é€Ÿçš„ CSS å±¬æ€§å¯¦ä½œå‹•ç•«ï¼Œæå‡æ•ˆèƒ½ã€‚

**å¯¦ä½œç¯„ä¾‹**:
```css
@keyframes pulse {
    0%, 100% {
        /* ä½¿ç”¨ box-shadow è€Œé width/height */
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    }
    50% {
        box-shadow: 0 0 30px rgba(102, 126, 234, 0.7);
    }
}
```

**å„ªå‹¢**:
- âœ… 60 FPS æµæš¢å‹•ç•«
- âœ… ä½ CPU ä½¿ç”¨ç‡
- âœ… çœé›»ï¼ˆè¡Œå‹•è£ç½®ï¼‰

### 5. æ¼¸é€²å¼å¢å¼·è¨­è¨ˆ

**æŠ€è¡“èªªæ˜**:  
å³ä½¿ API å¤±æ•—ï¼Œå‰ç«¯ä¹Ÿèƒ½æä¾›åŸºæœ¬åŠŸèƒ½ã€‚

**å¯¦ä½œç¯„ä¾‹**:
```javascript
async startSession() {
    try {
        // å˜—è©¦ API å‘¼å«
        const result = await fetch('/Pomodoro/StartSession', ...);
        // æˆåŠŸå¾Œé‡æ–°è¼‰å…¥
        await this.loadTasks();
    } catch (error) {
        // API å¤±æ•—ä¸å½±éŸ¿è¨ˆæ™‚å™¨é‹ä½œ
        console.error('é–‹å§‹å·¥ä½œéšæ®µå¤±æ•—:', error);
        // è¨ˆæ™‚å™¨ä»ç„¶å¯ä»¥ç¹¼çºŒ
    }
}
```

**å„ªå‹¢**:
- âœ… å®¹éŒ¯æ€§é«˜
- âœ… é›¢ç·šä»å¯ä½¿ç”¨
- âœ… æå‡å¯é æ€§

---

## æœªä¾†æ”¹é€²å»ºè­°

### çŸ­æœŸæ”¹é€²ï¼ˆ1-2 é€±ï¼‰

#### 1. é€šçŸ¥ç³»çµ±æ”¹å–„
**ç›®å‰ç‹€æ…‹**: ä½¿ç”¨ `alert()` é¡¯ç¤ºé€šçŸ¥  
**æ”¹é€²å»ºè­°**: å¯¦ä½œ Toast é€šçŸ¥å…ƒä»¶

```javascript
// ç›®å‰
this.showNotification(message, type) {
    alert(message); // âŒ é˜»å¡å¼ UI
}

// å»ºè­°æ”¹é€²
this.showNotification(message, type) {
    const toast = new Toast({
        message: message,
        type: type,
        duration: 3000,
        position: 'top-right'
    });
    toast.show(); // âœ… éé˜»å¡å¼
}
```

**é æœŸæ•ˆç›Š**:
- âœ… ä¸é˜»å¡ä½¿ç”¨è€…æ“ä½œ
- âœ… æ›´å°ˆæ¥­çš„è¦–è¦ºæ•ˆæœ
- âœ… å¯å †ç–Šå¤šå€‹é€šçŸ¥

#### 2. é›¢ç·šæ”¯æ´
**æ”¹é€²å»ºè­°**: ä½¿ç”¨ Service Worker å¿«å–è³‡æ–™

**å¯¦ä½œæ­¥é©Ÿ**:
1. è¨»å†Š Service Worker
2. å¿«å–éœæ…‹è³‡æº
3. ä½¿ç”¨ IndexedDB å„²å­˜ä»»å‹™
4. åŒæ­¥è‡³ä¼ºæœå™¨

**é æœŸæ•ˆç›Š**:
- âœ… é›¢ç·šå¯ç”¨
- âœ… æ›´å¿«çš„è¼‰å…¥é€Ÿåº¦
- âœ… é™ä½ä¼ºæœå™¨è² è¼‰

#### 3. éµç›¤å¿«æ·éµ
**æ”¹é€²å»ºè­°**: æ–°å¢å¸¸ç”¨æ“ä½œçš„å¿«æ·éµ

**å»ºè­°å¿«æ·éµ**:
- `Space`: é–‹å§‹/æš«åœ
- `R`: é‡è¨­
- `N`: æ–°å¢ä»»å‹™
- `Esc`: é—œé–‰å½ˆçª—

**é æœŸæ•ˆç›Š**:
- âœ… æå‡é€²éšä½¿ç”¨è€…æ•ˆç‡
- âœ… ç„¡éšœç¤™åŠŸèƒ½æ”¹å–„

---

### ä¸­æœŸæ”¹é€²ï¼ˆ1-2 å€‹æœˆï¼‰

#### 1. æ‹–æ›³æ’åºåŠŸèƒ½
**æ”¹é€²å»ºè­°**: æ”¯æ´ä»»å‹™æ‹–æ›³æ’åº

**æŠ€è¡“æ–¹æ¡ˆ**:
- ä½¿ç”¨ HTML5 Drag and Drop API
- æˆ–æ•´åˆ SortableJS å‡½å¼åº«

**é æœŸæ•ˆç›Š**:
- âœ… æ›´ç›´è¦ºçš„ä»»å‹™ç®¡ç†
- âœ… è‡ªè¨‚ä»»å‹™å„ªå…ˆé †åº

#### 2. çµ±è¨ˆåœ–è¡¨è¦–è¦ºåŒ–
**æ”¹é€²å»ºè­°**: æ–°å¢åœ–è¡¨å±•ç¤ºçµ±è¨ˆè³‡æ–™

**æŠ€è¡“æ–¹æ¡ˆ**:
- æ•´åˆ Chart.js æˆ– D3.js
- é¡¯ç¤ºæ¯æ—¥/æ¯é€±/æ¯æœˆè¶¨å‹¢

**é æœŸæ•ˆç›Š**:
- âœ… æ›´æ¸…æ¥šçš„ç”Ÿç”¢åŠ›åˆ†æ
- âœ… æ¿€å‹µä½¿ç”¨è€…æŒçºŒä½¿ç”¨

#### 3. è³‡æ–™åŒ¯å‡ºåŠŸèƒ½
**æ”¹é€²å»ºè­°**: æ”¯æ´åŒ¯å‡ºä»»å‹™å’Œçµ±è¨ˆè³‡æ–™

**æ”¯æ´æ ¼å¼**:
- CSV: ä¾¿æ–¼ Excel åˆ†æ
- JSON: è³‡æ–™å‚™ä»½
- PDF: å ±å‘Šè¼¸å‡º

**é æœŸæ•ˆç›Š**:
- âœ… è³‡æ–™å¯æ”œæ€§
- âœ… å‚™ä»½èˆ‡é‚„åŸ

---

### é•·æœŸæ”¹é€²ï¼ˆ3-6 å€‹æœˆï¼‰

#### 1. ä½¿ç”¨è€…å¸³æˆ¶ç³»çµ±
**æ”¹é€²å»ºè­°**: å¯¦ä½œä½¿ç”¨è€…èªè­‰èˆ‡æˆæ¬Š

**åŠŸèƒ½ç¯„åœ**:
- è¨»å†Š/ç™»å…¥
- å€‹äººè¨­å®šæª”
- å¤šè£ç½®åŒæ­¥
- è³‡æ–™éš”é›¢

**æŠ€è¡“æ–¹æ¡ˆ**:
- ASP.NET Core Identity
- JWT Token èªè­‰
- Azure AD B2Cï¼ˆå¯é¸ï¼‰

#### 2. é›²ç«¯åŒæ­¥
**æ”¹é€²å»ºè­°**: è³‡æ–™é›²ç«¯å„²å­˜èˆ‡åŒæ­¥

**æŠ€è¡“æ–¹æ¡ˆ**:
- å¾Œç«¯æ”¹ç”¨è³‡æ–™åº«ï¼ˆSQL Server / PostgreSQLï¼‰
- å¯¦ä½œ RESTful API
- ä½¿ç”¨ SignalR å³æ™‚åŒæ­¥

#### 3. åœ˜éšŠå”ä½œåŠŸèƒ½
**æ”¹é€²å»ºè­°**: æ”¯æ´åœ˜éšŠå…±äº«ä»»å‹™

**åŠŸèƒ½ç¯„åœ**:
- å»ºç«‹åœ˜éšŠ
- åˆ†äº«ä»»å‹™
- å”ä½œçµ±è¨ˆ
- æ’è¡Œæ¦œ

---

## çµè«–

### ä¿®æ­£æˆæœç¸½çµ

æœ¬æ¬¡ä¿®æ­£æˆåŠŸè§£æ±ºäº†å…©å€‹é—œéµ Bug ä¸¦æ–°å¢äº†é‡è¦çš„ UX æ”¹å–„åŠŸèƒ½ï¼š

âœ… **Bug ä¿®æ­£**:
1. ä»»å‹™é»æ“Šé–‹å§‹å¾Œç«‹å³å•Ÿå‹•è¨ˆæ™‚å™¨
2. ä»»å‹™ç‹€æ…‹æ­£ç¢ºæ›´æ–°ç‚ºã€Œé€²è¡Œä¸­ã€

âœ… **åŠŸèƒ½æ–°å¢**:
1. æ™ºæ…§æŒ‰éˆ•åˆ‡æ›ï¼ˆé–‹å§‹ â†” æš«åœï¼‰
2. è¦–è¦ºæ•ˆæœå¢å¼·ï¼ˆè„ˆæå‹•ç•«ã€åŸ·è¡Œåœ–ç¤ºï¼‰
3. æ¨‚è§€æ›´æ–°æ©Ÿåˆ¶ï¼ˆå³æ™‚ UI å›é¥‹ï¼‰

âœ… **æŠ€è¡“æ”¹é€²**:
1. éåŒæ­¥æµç¨‹æ§åˆ¶å„ªåŒ–
2. ç‹€æ…‹é©…å‹•æ¶æ§‹å¯¦ä½œ
3. CSS å‹•ç•«æ•ˆèƒ½å„ªåŒ–

### å½±éŸ¿ç¯„åœ

- **ä½¿ç”¨è€…é«”é©—**: å¤§å¹…æå‡ï¼ˆæ“ä½œæ­¥é©Ÿæ¸›å°‘ 50%ï¼‰
- **ç¨‹å¼ç¢¼å“è³ª**: æå‡ï¼ˆæ›´æ¸…æ™°çš„éåŒæ­¥æ§åˆ¶ï¼‰
- **ç¶­è­·æ€§**: æå‡ï¼ˆç‹€æ…‹é©…å‹•æ¶æ§‹ï¼‰
- **æ•ˆèƒ½**: å„ªåŒ–ï¼ˆç¡¬é«”åŠ é€Ÿå‹•ç•«ï¼‰

### å»ºè­°å¾ŒçºŒè¡Œå‹•

1. âœ… **ç«‹å³**: éƒ¨ç½²è‡³æ¸¬è©¦ç’°å¢ƒ
2. âœ… **çŸ­æœŸ**: å¯¦ä½œ Toast é€šçŸ¥ç³»çµ±
3. âœ… **ä¸­æœŸ**: æ–°å¢çµ±è¨ˆåœ–è¡¨åŠŸèƒ½
4. âœ… **é•·æœŸ**: è¦åŠƒä½¿ç”¨è€…å¸³æˆ¶ç³»çµ±

---

## é™„éŒ„

### A. ç›¸é—œæ–‡ä»¶

- [ä¿®æ­£èªªæ˜ v1](/Users/qiuzili/DemoMVC/ä¿®æ­£èªªæ˜.md)
- [ä¿®æ­£èªªæ˜ v2](/Users/qiuzili/DemoMVC/ä¿®æ­£èªªæ˜_v2.md)
- [ç•ªèŒ„é˜æŠ€è¡“ç¸½çµ](/Users/qiuzili/DemoMVC/.github/Summarize/PomodoroTechnique-Summary.md)

### B. åƒè€ƒè³‡æº

- [MDN Web Docs - async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)
- [CSS Triggers](https://csstriggers.com/) - CSS å±¬æ€§æ•ˆèƒ½åƒè€ƒ
- [Optimistic UI Pattern](https://www.apollographql.com/docs/react/performance/optimistic-ui/) - æ¨‚è§€æ›´æ–°æ¨¡å¼

### C. è®Šæ›´æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | è®Šæ›´èªªæ˜ |
|------|------|------|----------|
| 1.0 | 2025-10-01 | HyperLee | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´æŠ€è¡“ç¸½çµ |

---

**æ–‡ä»¶çµæŸ**  
Â© 2025 DemoMVC Project. All rights reserved.
